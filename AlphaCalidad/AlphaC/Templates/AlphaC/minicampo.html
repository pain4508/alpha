{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fomulario Chile MINI Campo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    <link href='{%  static "estilos.css" %}' rel="stylesheet" type="text/css" />

</head>

<body>
    <div>
        <label for='txtFiltro'>Filtrar por una Codigo</label>
        <input  id="txtFiltro" type="text" onkeyup="buscarCodigo()">
        <input type="button" onclick="descargaExcel('tabla10', 'Registro Mini Campo', 'Registro Mini Campo')" value="Exportar a Excel">
    </div>
    <form method="post">
        {% csrf_token %}
        <ul>
            <input type="button" class="btnx" onclick="history.back()" name="volver atrás" value="volver atrás ">
        </ul>

        <h1>Chile Mini en Campo </h1>

        
        <br/> {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
                {% endfor %}
        </ul>
        {% endif %}
      



        <div align="left" class="btn_crear mb-3">
            <a href="/nuevoChileMiniCosecha" type="button" class="btn btn-primary">Nuevo registro</a>
        </div>
        <table class="table table-bordered border-primary  " id="tabla10">
       
                <thead>
            
                    <TR>
                        <th colspan="5" class="bg-success "></th>
                        <th colspan="3" class="bg-primary ">Tamaño de Muestra</th>

                    <th colspan="2" class="bg-secondary ">Aprovechable</th>
                    <th colspan="2" class="bg-secondary " >Rechazo</th>
                    
                    <th rowspan="2" class="bg-secondary " >relacionCaja5/Cesta</th>

                       
                        
                        <th colspan="23"  class="bg-danger">Daños del producto</th>
                    </TR>
                    
                    
                 
                
               
                <tr>
                 
                    <th>Codigo</th>

                    <th>Fecha</th>
                    <th>Hora</th>
                    <th>Invernadero</th>
                    <th>Variedad</th>

                    <th>Kilogramo</th>
                    <th>cajas/Cosechas</th>
                    <th>Kg/Caja</th>
                    
                    <th>Kg</th>
                    <th>%</th>
                    <th>Kg</th>
                    <th>%</th>
                   
                    
                    <th>CalizDañado</th>
                    <th>%</th> 
                    <th>Mecanico</th>
                    <th>%</th>
                    <th>Gusano</th>
                    <th>%</th>
                    <th>GOptimo</th>
                    <th>%</th>
                    <th>Silverado</th>
                    <th>%</th>
                    <th>Materia Extraña</th>
                    <th>%</th>
                    <th>SobreMaduro25</th>
                    <th>%</th>
                    <th>blossom</th>
                    <th>%</th>
                    <th>Cracking</th>
                    <th>%</th>
                    <th>Deforme</th>
                    <th>%</th>
                    <th>Flacido</th>
                    <th>%</th>
                    <th>Hongo</th>
                    <th>%</th>
                    <th>Podrido</th>
                    <th>%</th>
                    <th>Tamaño</th>
                    <th>%</th>
                    <th>Temperatura</th>
                    <th rowspan="2">Opciones</th>



                </tr>
            </thead>
            
            <script src="https://code.jquery.com/jquery-3.0.0.js"></script>
            <!-- Recorremos los registros de la tabla  y los mostramos -->
            <tbody id="body1">
                {% for ChileminiCosecha in object_list %}
                <tr>
                    <td>{{ ChileminiCosecha.idchile_mini }}</td>
                    <td type = "date" >{{ ChileminiCosecha.fecha |date:"d/m/Y"}}</td>
                    <td>{{ ChileminiCosecha.hora }}</td>
                    <td>{{ ChileminiCosecha.idinvernadero }}</td>
                
                    <td>{{ ChileminiCosecha.idvariedad3 }}</td>

                    <td id="kg">{{ ChileminiCosecha.kilogramo }}</td>
                    <td id="ccosechas">{{ ChileminiCosecha.cajas_cosechas }}</td>
                    <td id="kgcaja" ons></td> <!-- valor de la funcion  -->

                    <td id="kgApro"></td>
                    <td id="porcApro"></td>
                    <td id="sumaKgRechazo" ></td>
                    <td id="porcRech"></td>
                    <td id="caja5"></td>

                    <td id="calizd">{{ ChileminiCosecha.calizdanado}}</td>
                    <td></td>
                    <td id="mec">{{ ChileminiCosecha.mecanico}}</td>
                    <td></td>
                    <td id="gus">{{ ChileminiCosecha.gusano}}</td>
                    <td></td>
                    <td id="gop">{{ ChileminiCosecha.grado_optimo}}</td>
                    <td></td>
                    <td id="sil">{{ ChileminiCosecha.silverado}}</td>
                    <td></td>
                    <td id="matEx">{{ ChileminiCosecha.materiaextrana}}</td>
                    <td></td>
                    <td id="sMad">{{ ChileminiCosecha.sobremaduro }}</td>
                    <td></td>
                    <td id="blo">{{ ChileminiCosecha.blossom }}</td>
                    <td></td>
                    <td id="cra">{{ ChileminiCosecha.cracking }}</td>
                    <td></td>
                    <td id="def">{{ ChileminiCosecha.deforme }}</td>
                    <td></td>
                    <td id="fla">{{ ChileminiCosecha.flacido }}</td>
                    <td></td>
                    <td id="hon">{{ ChileminiCosecha.hongo }}</td>
                    <td></td>
                    <td id="pod">{{ ChileminiCosecha.podrido }}</td>
                    <td></td>
                    <td id="tam">{{ ChileminiCosecha.tamano }}</td>
                    <td></td>
                    <td>{{ ChileminiCosecha.temperatura }}</td>
                    <td>

                        <!-- Formulario para eliminar un registro desde la misma tabla HTML -->
                        <form method="POST" action="/eliminarChileMiniCosecha/{{ ChileminiCosecha.idchile_mini }}">
                            {% csrf_token %}
                            <div class="btn-group">
    
                                <!-- Creacion de botones de opciones -->
    
                                <a href="/editarChileMiniCosecha/{{ChileminiCosecha.idchile_mini}}" title="Editar" type="button" class="btn btn-primary">Editar </a>
                                <button class="btn btn-danger" onclick="return eliminar();" type="submit">Eliminar</button>

                            </div>
                        </form>
                        
                    </td>
                    
                </tr>
                {% endfor %}
              
             
            </tbody>
          
            </div>
    
            <script type="text/javascript">
                function eliminar() {
                    var x = confirm("¿Está seguro de que desea eliminar el registro?");
                    if (x)
                        return true;
    
                    else
                        return false;
                }
            </script>
    
        </form>
    </table>
    <table  class="table table-bordered border-primary  " >
        <tr>
            <td colspan = "5">Totales</td>
            <td id="sumaKg" ></td>
            <td id="sumaCajaCosechas" ></td>
            <td id="sumakgcaja"></id>
            <td></id>
            </table>
            

        </tr>
    <a href="https://docs.google.com/spreadsheets/d/1Ssz_1gHZsAUNlI2ylDX_asUhiHl5T8GpnQGIhvfFGIE/edit#gid=0">Excel</a>
    
    <script src=' {% static "funciones.js" %}' type="text/javascript"></script>
    
</body>

</html>